<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xsd.helmut-hummel.de/ns/TYPO3/CMS/Fluid/ViewHelpers"
      data-namespace-typo3-fluid="true"
>

<f:if condition="{resultrow.type} == 'cal'">
    <f:then>
        <f:spaceless>
            <f:format.raw>
                "
                <f:if condition="{resultrow.cal.allday} != 1">
                    <f:then>
                        <f:if condition="{resultrow.cal.sameday}">
                            <f:then>
                                <f:format.date
                                        format='{f:translate(key: "LLL:EXT:ke_search/Resources/Private/Language/locallang_searchbox.xlf:dateformat.dateAndTime")}'>
                                    @{resultrow.date_timestamp}
                                </f:format.date>
                                -
                                <f:format.date
                                        format='{f:translate(key: "LLL:EXT:ke_search/Resources/Private/Language/locallang_searchbox.xlf:dateformat.time")}'>
                                    @{resultrow.cal.end_timestamp}
                                </f:format.date>
                            </f:then>
                            <f:else>
                                <f:format.date
                                        format='{f:translate(key: "LLL:EXT:ke_search/Resources/Private/Language/locallang_searchbox.xlf:dateformat.dateAndTimeWithoutYear")}'>
                                    @{resultrow.date_timestamp}
                                </f:format.date>
                                -
                                <f:if condition="{f:format.date(date: '@{resultrow.cal.end_timestamp}', format: '%H:%M')} == '00:00'">
                                    <f:then>
                                        <f:format.date
                                                format='{f:translate(key: "LLL:EXT:ke_search/Resources/Private/Language/locallang_searchbox.xlf:dateformat.dateWithYear")}'>
                                            @{resultrow.cal.end_timestamp}
                                        </f:format.date>
                                    </f:then>
                                    <f:else>
                                        <f:format.date
                                                format='{f:translate(key: "LLL:EXT:ke_search/Resources/Private/Language/locallang_searchbox.xlf:dateformat.dateAndTime")}'>
                                            @{resultrow.cal.end_timestamp}
                                        </f:format.date>
                                    </f:else>
                                </f:if>
                            </f:else>
                        </f:if>
                    </f:then>
                    <f:else>
                        <f:if condition="{resultrow.cal.sameday}">
                            <f:then>
                                <f:format.date
                                        format='{f:translate(key: "LLL:EXT:ke_search/Resources/Private/Language/locallang_searchbox.xlf:dateformat.dateWithYear")}'>
                                    @{resultrow.date_timestamp}
                                </f:format.date>
                            </f:then>
                            <f:else>
                                <f:format.date
                                        format='{f:translate(key: "LLL:EXT:ke_search/Resources/Private/Language/locallang_searchbox.xlf:dateformat.dateWithYear")}'>
                                    @{resultrow.date_timestamp}
                                </f:format.date>
                                -
                                <f:format.date
                                        format='{f:translate(key: "LLL:EXT:ke_search/Resources/Private/Language/locallang_searchbox.xlf:dateformat.dateWithYear")}'>
                                    @{resultrow.cal.end_timestamp}
                                </f:format.date>
                            </f:else>
                        </f:if>
                    </f:else>
                </f:if>
                "
            </f:format.raw>
        </f:spaceless>
    </f:then>
</f:if>
