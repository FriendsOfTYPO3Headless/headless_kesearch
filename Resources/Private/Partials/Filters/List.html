<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xsd.helmut-hummel.de/ns/TYPO3/CMS/Fluid/ViewHelpers"
      data-namespace-typo3-fluid="true"
>

<f:spaceless>
    <f:format.raw>
        <f:format.json value="{
            type: 'list',
            uid: filter.uid,
            id: filter.id,
            title: filter.title,
            resetLink: '{f:uri.typolink(parameter:\'{filter.resetLink}\',absolute:1)}',
            options: '{f:render(section:\'Options\', arguments:\'{options: filter.options}\') -> headless:format.json.decode()}'
        }"/>
    </f:format.raw>
</f:spaceless>

<f:section name="Options">
    <f:spaceless>
        <f:format.raw>
            [<f:for each="{options}" as="option" iteration="optionIterator">
            <f:format.json value="{
                    title: option.title,
                    link: '{f:uri.typolink(parameter:\'{option.link}\',absolute:1)}',
                    selected: '{f:if(condition: option.selected, then: 1, else: 0)}'
                }"/>
            {f:if(condition: optionIterator.isLast, else: ',')}
        </f:for>]
        </f:format.raw>
    </f:spaceless>
</f:section>

</html>
